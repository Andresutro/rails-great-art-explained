<a-scene>
    <a-entity id="image-container"></a-entity>
    <a-cylinder position="0 0 0" radius="0.5" height="30" color=" #283747 "></a-cylinder>
    <a-plane position="0 0 -4" rotation="-90 0 0" width="30" height="150"  color="black"></a-plane>
    <a-sky color="#ECECEC"></a-sky>
</a-scene>

<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        let radius = 5;
        let container = document.querySelector("#image-container");
        let theta, x, y, z, image, rotation, scale;
        let count = <%= @user.arts.length %>;

        <% @user.arts.each_with_index do |art, i| %>
            theta = ((<%= i %> / count) * Math.PI * 2) + Math.PI;
            x = radius * Math.cos(theta);
            z = radius * Math.sin(theta);

            rotation = 90 - ((<%= i %> / count) * 360);

            y = 1.4;

            scale = 2 / Math.sqrt(count);

            image = document.createElement("a-image");
            image.setAttribute("src", "<%= cl_image_path(art.photo.key) %>");
            image.setAttribute("position", `${x} ${y} ${z}`);
            image.setAttribute("rotation", `0 ${rotation} 0`);
            image.setAttribute("width", scale);
            container.appendChild(image);
        <% end %>
    });
</script>




<script>
    // Coloca este código en el lugar apropiado de tu script

    // Verificar si la recarga ya ocurrió
    if (!sessionStorage.getItem('pageReloaded')) {
        // Marcar la recarga como realizada
        sessionStorage.setItem('pageReloaded', true);

        // Recargar la página
        location.reload();
    }
</script>
